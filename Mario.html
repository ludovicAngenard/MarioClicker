<!doctype html>
<html lang="fr">
    <head>
        <meta charset="utf8">
        <title> first page</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <script language="javascript"> 
            var sauter=false;
            var score= 0;
            var ouvert=false;
            var gainGenere=0;
            var luigiEstActif=false;

            class Bonus 
            {
                multiplicateurEffet = 1;
                constructor(prix, nombre) 
                {
                    this.prix = prix;
                    this.nombre = nombre;
                }
                
                get prixBonus() 
                {
                    return this.prix;
                }
                get nombreBonus()
                {
                    return this.nombre;
                }
                get effetBonus()
                {
                    return this.multiplicateurEffet;
                }
                calculPrixBonus()
                {            
                    this.prix*=1.5;
                    return this.prix;
                }

                calculNombreBonus()
                {
                    this.nombre+=1;
                    return this.nombre;
                }
                calculEffetBonus()
                {
                    this.multiplicateurEffet*=2;
                    return  this.multiplicateurEffet;
                }

            }

            var pieceEtoile= new Bonus(100,0);

            function multiplicateurDeGain(){
               if (score>=Math.round(pieceEtoile.prixBonus))
               {
                    score-=Math.round(pieceEtoile.prixBonus)
                    pieceEtoile.calculPrixBonus()
                    pieceEtoile.calculNombreBonus()
                    pieceEtoile.calculEffetBonus()
               }
               document.getElementById('prixPieceEtoile').textContent='Prix : '+Math.round(pieceEtoile.prixBonus);
               afficheCompteur()
           }
          



            var champignon= new Bonus(100,0);

            function multiplicateurDegat(){
               
               if (score>=Math.round(champignon.prixBonus)){
                    score-=Math.round(champignon.prixBonus);
                    champignon.calculPrixBonus();
                    champignon.calculNombreBonus();
                    champignon.calculEffetBonus();
                }
                document.getElementById('prixChampignon').textContent='X : '+Math.round(champignon.prixBonus);
                document.getElementById('inventaireNombreChampignon').textContent='X : '+Math.round(champignon.nombreBonus);
                afficheCompteur()
           }
       
            var luigi= new Bonus(200,0);

            function achatAutoGain(){
                if ((score>=Math.round(luigi.prixBonus)) && (!luigiEstActif)){
                    score-=Math.round(luigi.prixBonus);
                    luigi.calculPrixBonus();
                    luigi.calculNombreBonus();
                    luigiEstActif=true;
                    autoGain();
                    normal();
                   
                }
                document.getElementById('prixLuigi').textContent='X : '+Math.round(luigi.prixBonus);
                afficheCompteur()
            }
       
            function autoGain(){
                if(gainGenere<=40)
                {
                    document.getElementById('MarioPoids').style.visibility="visible";
                    document.getElementById('pieceDessous').style.visibility="hidden";
                    setTimeout(ajoutDuGain, 100);
                    
                }
                else{
                    luigiEstActif=false;
                    gainGenere=0;
                    document.getElementById('MarioPoids').style.visibility="hidden";
                    document.getElementById('pieceDessous').style.visibility="hidden";
                }
                
            }
            function ajoutDuGain(){
                
                score+=10*luigi.effetBonus
                gainGenere+=1; 
                afficheCompteur()
                document.getElementById('pieceDessous').style.visibility="visible";
                setTimeout(autoGain, 200);
                
                
                
            }

            function saut()
            {
               
                if (!sauter){
                    if (luigiEstActif){
                        document.getElementById('icon').src='LuigiSaut.png';
                    }
                    else
                    {
                        document.getElementById('icon').src='sticker-mario-saut.jpg.png';
                    }
                    sauter = !sauter;
                    compteur()
                    document.getElementById('piece').style.visibility="visible";
                    setTimeout(normal, 200);
                                 
                }
    
            }

            function normal()
            {
                if (luigiEstActif){
                    document.getElementById('icon').src='Luigi.png';
                }
                else{
                    document.getElementById('icon').src='MarioNSMBUDeluxe.png';
                }
                
                document.getElementById('piece').style.visibility="hidden";
                sauter=false;

            }

            function compteur(){
                score += 1 * pieceEtoile.effetBonus;
                
                afficheCompteur()
            }
            function afficheCompteur(){
                document.getElementById('compteurChiffre').textContent="X "+score;
            }

            function apparitionSac(){
                if (!ouvert){
                    document.getElementById('sac').style.visibility='visible';
                    ouvert=!ouvert;
                }
                else{
                    document.getElementById('sac').style.visibility='hidden';
                    ouvert=!ouvert;
                }
 
            }
            function combat(){
                document.getElementById('contientMarioEtPiece').style.display='none';
            }
           
            
            </script>
            
    </head>
    <body>
        <div class='Container gauche' id='contientMarioEtPiece'>

            <div class="d-flex justify-content-start">
                <img src='piece.png' id="compteur"  class='compteur'; /> 
                <p id='compteurChiffre' class='compteur'>X 0</p>
            </div>

            

            <div class="d-flex justify-content-center">
                <img src='piece.png' id="piece" />
            </div>
            
            <div class="d-flex justify-content-center">
                <img src='MarioPound.png' id="MarioPoids" />
            </div>

            <div class="d-flex justify-content-center">
                <img src='block.png' class="block"  />
            </div>
            <div class="d-flex justify-content-center">
                <img src='10Coin.png' id="pieceDessous" />
            </div>
            
            <div class=" gauche " id='inventaireBoutton'>
                <img src='MysteryBox.png'   onclick=apparitionSac(); />
              
            </div>
            <div class=" droite " id='combatBouton'>
                <img src='bowserBouton.png'   onclick=combat(); />
              
            </div>

            <div class="d-flex justify-content-center">  
                <img src='MarioNSMBUDeluxe.png' class="Mario" id='icon' onclick=saut(); />
            </div>

        </div>

        <div  class='Container' id="ContientCombat"> 
            
        </div>




        <div class='ContainerPetit droite'>

            <img src='StarCoin.png' class="bonus" id='StarCoin' onclick=multiplicateurDeGain(); />
            <p id='prixPieceEtoile'>Prix : 100</p>

            <div class='clear'></div>

            <img src='LuigiCasquette.png' class="bonus" id='luigi' onclick=achatAutoGain(); />
            <p id='prixLuigi'>Prix : 200</p>

            <div class='clear'></div>

            <img src='champignon.png' class="bonus" id='champignon' onclick=multiplicateurDegat(); />
            <p id='prixChampignon'>Prix : 100</p>

        </div>

       

        <div id='sac' class="ContainerPetit">
           
            <img src='croix.png' class="droite" id='StarCoin' onclick=apparitionSac(); />

            <p class='titre'>INVENTAIRE</p>

            <div>
                <img src='champignon.png' class="gauche"  />

                <div class='clear'></div>

                <p id='inventaireNombreChampignon'>X 0 </p>
            </div>

        </div>
      
           
          
           
       


    </body>
</html>